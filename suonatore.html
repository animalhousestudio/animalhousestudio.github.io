function startRain() {
  const isInverted = document.body.classList.contains('inverted-theme');
  const rainAllowed = rainPages.includes(pageIndex) || isInverted;

  console.log(`ğŸŒ§ DEBUG startRain() - Pagina: ${pageIndex}, isInverted: ${isInverted}, rainAllowed: ${rainAllowed}, isRaining: ${isRaining}`);
  console.log(`ğŸŒ§ DEBUG rainCanvas active: ${rainCanvas ? rainCanvas.classList.contains('active') : 'rainCanvas null'}`);
  console.log(`ğŸŒ§ DEBUG rainPages include ${pageIndex}: ${rainPages.includes(pageIndex)}`);

  if (!rainAllowed) {
    console.log('ğŸŒ§ Rain not allowed for this page');
    stopRain();
    return;
  }

  // Se la pioggia non Ã¨ attiva o non sta piovendo, avviala
  if (!isRaining || !rainCanvas.classList.contains('active')) {
    console.log('ğŸŒ§ Avvio pioggia per pagina', pageIndex, '- Motivo:', isInverted ? 'tema invertito' : 'pagina speciale');
    rainCanvas.classList.add('active');
    clearInterval(rainInterval);
    rainInterval = setInterval(updateRain, 30);
    isRaining = true;
  } else {
    console.log('ğŸŒ§ Rain already active');
  }

  // Gestione diversa per tema invertito vs pagine speciali
  if (isInverted) {
    console.log('ğŸŒ§ Pioggia continua per tema invertito');
    // Non programmare stop per il tema invertito
  } else {
    // Logica originale per le pagine speciali (ciclo on/off)
    setTimeout(() => {
      console.log('ğŸŒ§ Stopping rain after 3 seconds for special page');
      stopRain();
      if (rainPages.includes(pageIndex)) {
        setTimeout(() => {
          console.log('ğŸŒ§ Restarting rain after 2 seconds pause');
          startRain();
        }, 2000);
      }
    }, 3000);
  }
}
